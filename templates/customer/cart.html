{% extends 'customer/base.html' %}

{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'styles/cart.css' %}">
<br><br>
   <div class="CartContainer">
   	   <div class="Header">
   	   	<h3 class="Heading">Shopping Cart</h3>
   	   	<h5 class="Action">Remove all</h5>
   	   </div>
         {% for c in cart_items %}
            <div class="Cart-Items">
                  <div class="image-box">
                        <img src="{{ c.item.photo.url }}" height="200px">
                  </div>
                  <div class="about">
                        <h1 class="title">{{c.item.name}}</h1>
                        <h3 class="title">{{c.item.category.name}}</h3>
                        <h3 class="subtitle">{{c.item.description}}</h3>
                        <img src="images/veg.png" height="30px">
                  </div>
                  <div class="counter">
                        <div class="btn">+</div>
                        <div class="count">{{c.quantity}}</div>
                        <div class="btn">-</div>
                  </div>
                  <div class="prices">
                        <div class="amount">{{c.item.price}} ₹</div>
                        <div class="save"><u>Save for later</u></div>
                        <div class="remove"><u>Remove</u></div>
                  </div>
            </div>
         {% endfor %}


   	 <hr> 
   	 <div class="checkout">
   	 <div class="total">
   	 	<div>
   	 		<div class="Subtotal">Sub-Total</div>
   	 		<div class="items">2 items</div>
   	 	</div>
   	 	<div class="total-amount">{{total}} ₹</div>
   	 </div>
       <form method="post" action="pay_order">
            {% csrf_token %}
   	 <input class="button" type="submit" value="checkout"></div>
       </form>

          {% if payment %}
          <form action="{% url 'payment_status' %}" method="POST">
                {% csrf_token %}
                <script
                    src="https://checkout.razorpay.com/v1/checkout.js"
                    data-key="rzp_test_y6QiMSkcMNKsTw" // Enter the Test API Key ID generated from Dashboard → Settings → API Keys
                    data-amount="{{ payment.amount }}" // Amount is in currency subunits. Hence, 29935 refers to 29935 paise or ₹299.35.
                    data-currency="{{ payment.currency }}"// You can accept international payments by changing the currency code. Contact our Support Team to enable International for your account
                    data-order_id="{{ payment.id }}"// Replace with the order_id generated by you in the backend.
                    data-buttontext="Pay with Razorpay"
                    data-name="Acme Corp"
                    data-description="A Wild Sheep Chase is the third novel by Japanese author Haruki Murakami"
                    data-image="https://example.com/your_logo.jpg"
                    data-prefill.name="Gaurav Kumar"
                    data-prefill.email="gaurav.kumar@example.com"
                    data-theme.color="#F37254"
                ></script>
                <input type="hidden" custom="Hidden Element" name="hidden"/>
          </form>
          {% endif %}

   </div>

{% endblock %}
